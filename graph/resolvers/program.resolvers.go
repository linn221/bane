package resolvers

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.81

import (
	"context"
	"fmt"

	"github.com/linn221/bane/app"
	"github.com/linn221/bane/graph"
	"github.com/linn221/bane/loaders"
	"github.com/linn221/bane/models"
)

// NewProgram is the resolver for the newProgram field.
func (r *mutationResolver) NewProgram(ctx context.Context, input *models.ProgramInput) (*models.Program, error) {
	return r.app.Services.ProgramService.Create(input)
}

// Alias is the resolver for the alias field.
func (r *programResolver) Alias(ctx context.Context, obj *models.Program) (string, error) {
	return loaders.GetProgramAlias(ctx, obj.Id)
}

// Rid is the resolver for the rid field.
func (r *programResolver) Rid(ctx context.Context, obj *models.Program) (int, error) {
	return loaders.GetRId(ctx, app.Reference{ReferenceId: obj.Id, ReferenceType: "programs"})
}

// Notes is the resolver for the notes field.
func (r *programResolver) Notes(ctx context.Context, obj *models.Program) ([]*models.Note, error) {
	// Use dataloader for efficient Notes loading
	return loaders.GetNotesForProgram(ctx, obj.Id)
}

// Programs is the resolver for the programs field.
func (r *queryResolver) Programs(ctx context.Context, search *string) ([]*models.Program, error) {
	return r.app.Services.ProgramService.List()
}

// Program is the resolver for the program field.
func (r *queryResolver) Program(ctx context.Context, id *int, alias *string) (*models.Program, error) {
	return r.app.Services.ProgramService.Get(id, alias)
}

// Tags is the resolver for the tags field.
func (r *programInputResolver) Tags(ctx context.Context, obj *models.ProgramInput, data []string) error {
	panic(fmt.Errorf("not implemented: Tags - tags"))
}

// Program returns graph.ProgramResolver implementation.
func (r *Resolver) Program() graph.ProgramResolver { return &programResolver{r} }

// ProgramInput returns graph.ProgramInputResolver implementation.
func (r *Resolver) ProgramInput() graph.ProgramInputResolver { return &programInputResolver{r} }

type programResolver struct{ *Resolver }
type programInputResolver struct{ *Resolver }
